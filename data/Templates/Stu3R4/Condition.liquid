{% mergeDiff msg -%}
{
  {%if msg.clinicalStatus -%}
  "clinicalStatus" : {
    "coding" : {
      "system" : "http://terminology.hl7.org/CodeSystem/condition-clinical",
      "code" : "{{msg.clinicalStatus}}"
    }
  },
  {% endif -%}
  {%if msg.verificationStatus -%}
  "verificationStatus" : {
    "coding" : {
      "system" : "http://terminology.hl7.org/CodeSystem/condition-ver-status",
      "code" : "{{msg.verificationStatus}}"
    }
  },
  {% endif -%}
  "encounter" : {{msg.context | to_json_string}},
  "recordedDate" : "{{msg.assertedDate | date: "yyyy-MM-dd"}}",
  "assertedDate" : "",
  "context" : ""
}
{% endmergeDiff -%}