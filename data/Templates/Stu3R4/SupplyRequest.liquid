{% diff msg -%}
{
  "identifier" : [ {{msg.identifier | to_json_string}} ],
  "itemCodeableConcept" : {{msg.orderedItem.itemCodeableConcept | to_json_string}},
  "itemReference" : {{msg.orderedItem.itemReference | to_json_string}},
  "quantity" : {{msg.orderedItem.quantity | to_json_string}},
  "extension" : [
    {%if msg.requester.onBehalfOf -%}
    {
      "url" : "http://hl7.org/fhir/r3/StructureDefinition/extension-SupplyRequest.requester.onBehalfOf",
      "valueReference" : {{msg.requester.onBehalfOf | to_json_string }}
    },
    {% endif -%}
  ],
  "requester" : {{msg.requester.agent | to_json_string}},
  "reasonCode" : [{{msg.reasonCodeableConcept | to_json_string }}],
  "reasonReference" : [{{msg.reasonReference | to_json_string }}],
  "reasonCodeableConcept" : "",
  "orderedItem" : ""
}
{% enddiff -%}